(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(n,e,t){n.exports=t(26)},20:function(n,e,t){},26:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(10),c=t.n(a),i=(t(20),t(2)),l=t(1),u={bg:"#eee",text:"#111"},f={bg:"#222",text:"#fff"},s=function(){return Array.from(Array(20),function(){return new Array(12).fill([0,"clear"])})},d=function(n,e,t){for(var r=t.x,o=t.y,a=0;a<n.tetromino.length;a+=1)for(var c=0;c<n.tetromino[a].length;c+=1)if(0!==n.tetromino[a][c]&&(!e[a+n.pos.y+o]||!e[a+n.pos.y+o][c+n.pos.x+r]||"clear"!==e[a+n.pos.y+o][c+n.pos.x+r][1]))return!0},m=t(3);function b(){var n=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  padding: 0 2rem;\n  background-color: ",";\n\n  header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1rem;\n  }\n\n  footer {\n    margin-top: 1rem;\n    flex-direction: row;\n    justify-content: center;\n    width: 100%;\n    display: flex;\n  }\n"]);return b=function(){return n},n}function p(){var n=Object(m.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-size: cover;\n  overflow: hidden;\n  outline: none;\n  display: flex;\n  flex-direction: column;\n\n  .wrapper {\n    width: 20rem;\n    text-align: center;\n\n    h1 {\n      font-family: Pixel, Arial, Helvetica, sans-serif;\n      font-size: 4.6rem;\n      color: ",";\n    }\n  }\n"]);return p=function(){return n},n}var h=l.b.div(p(),function(n){return n.theme.text}),x=l.b.div(b(),function(n){return n.theme.bg});var g=t(8),v={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},O=function(){var n="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return v[n]},y=function(n,e){var t=Object(r.useState)(s()),o=Object(i.a)(t,2),a=o[0],c=o[1],l=Object(r.useState)(0),u=Object(i.a)(l,2),f=u[0],d=u[1];return Object(r.useEffect)(function(){d(0);var t=function(t){var r=t.map(function(n){return n.map(function(n){return"clear"===n[1]?[0,"clear"]:n})});return n.tetromino.forEach(function(e,t){e.forEach(function(e,o){0!==e&&(r[t+n.pos.y][o+n.pos.x]=[e,"".concat(n.collided?"merged":"clear")])})}),n.collided?(e(),function(n){return n.reduce(function(e,t){return-1===t.findIndex(function(n){return 0===n[0]})?(d(function(n){return n+1}),e.unshift(new Array(n[0].length).fill([0,"clear"])),e):(e.push(t),e)},[])}(r)):r};c(function(n){return t(n)})},[n,e]),[a,c,f]},w=function(n){var e=function(){return Boolean(n.match(/Android/i))},t=function(){return Boolean(n.match(/iPhone|iPad|iPod/i))},r=function(){return Boolean(n.match(/SSR/i))},o=function(){return Boolean(e()||t()||Boolean(n.match(/Opera Mini/i))||Boolean(n.match(/IEMobile/i)))};return{isMobile:o,isDesktop:function(){return Boolean(!o()&&!r())},isAndroid:e,isIos:t,isSSR:r}};function E(){var n=Object(m.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(45vh / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  box-shadow: 0px 0px 41px 8px rgba(0, 0, 0, 0.4);\n  width: 100%;\n  max-width: 45vh;\n  background: #111;\n"]);return E=function(){return n},n}var j=l.b.div(E(),function(n){return n.height},function(n){return n.width},function(n){return n.width});function k(){var n=Object(m.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return k=function(){return n},n}var S=l.b.div(k(),function(n){return n.color},function(n){return 0===n.type?"0px solid":"4px solid"},function(n){return n.color},function(n){return n.color},function(n){return n.color},function(n){return n.color}),I=o.a.memo(function(n){var e=n.type;return o.a.createElement(S,{type:e,color:v[e].color})}),A=function(n){var e=n.stage;return o.a.createElement(j,{width:e[0].length,height:e.length},e.map(function(n){return n.map(function(n,e){return o.a.createElement(I,{key:e,type:n[0]})})}))};function J(){var n=Object(m.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0.2rem;\n  padding: 0.7rem;\n  border: 2px solid #777;\n  border-radius: 0.5rem;\n  color: ",";\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n"]);return J=function(){return n},n}var z=l.b.div(J(),function(n){return n.gameOver?"#ff6d00":"#999"}),M=function(n){var e=n.gameOver,t=n.text;return o.a.createElement(z,{gameOver:e},t)};function B(){var n=Object(m.a)(["\n  box-sizing: border-box;\n  padding: 20px 0;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 10px;\n  border: none;\n  color: white;\n  background: #ff6d00;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]);return B=function(){return n},n}var P=l.b.button(B()),C=function(n){var e=n.callback,t=n.text;return o.a.createElement(P,{onClick:e},t)};function L(){var n=Object(m.a)(['\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: absolute;\n  top: 1rem;\n\n  .theme-switch {\n    display: inline-block;\n    height: 24px;\n    position: relative;\n    width: 45px;\n\n    input {\n      display: none;\n    }\n\n    .slider {\n      background-color: #666;\n      bottom: 0;\n      cursor: pointer;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      outline: none;\n      -webkit-tap-highlight-color: transparent;\n      transition: 0.4s;\n\n      &:before {\n        background-color: #fff;\n        bottom: 4px;\n        content: "";\n        height: 16px;\n        left: 4px;\n        position: absolute;\n        transition: 0.4s;\n        width: 16px;\n      }\n\n      &.round {\n        border-radius: 34px;\n\n        &:before {\n          border-radius: 50%;\n        }\n      }\n    }\n\n    input:checked + .slider {\n      background-color: #ff6d00;\n    }\n\n    input:checked + .slider:before {\n      transform: translateX(20px);\n    }\n  }\n  .text {\n    color: ',";\n    margin-top: 0.5rem;\n    font-family: Pixel, Arial, Helvetica, sans-serif;\n    font-size: 0.8rem;\n  }\n"]);return L=function(){return n},n}var T=l.b.label(L(),function(n){return n.theme.text}),N=function(n){var e=n.onChange,t=n.text;return o.a.createElement(T,{htmlFor:"checkbox"},o.a.createElement("label",{className:"theme-switch"},o.a.createElement("input",{type:"checkbox",id:"checkbox",onChange:e}),o.a.createElement("div",{className:"slider round"})),o.a.createElement("span",{className:"text"},t))},R=t(4);function Z(){var n=Object(m.a)(["\n  margin: 0.2rem;\n  border-radius: 0.5rem;\n  border: none;\n  height: 3rem;\n  width: 3rem;\n  color: white;\n  background: #ff6d00;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 2.5rem;\n  outline: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-tap-highlight-color: transparent;\n\n  &:active {\n    -webkit-box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n    -moz-box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n    box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n  }\n"]);return Z=function(){return n},n}var H=l.b.button(Z()),D=function(n){var e=n.callback,t=n.onMouseUp,r=n.left,a=n.right,c=n.down;return o.a.createElement(H,{onMouseDown:function(n){n.preventDefault(),e(n)},onMouseUp:t},r?o.a.createElement(R.a,{size:""}):a?o.a.createElement(R.c,null):c?o.a.createElement(R.b,null):o.a.createElement(R.d,null))},U=function(){var n=Object(r.useState)(null),e=Object(i.a)(n,2),t=e[0],a=e[1],c=Object(r.useState)(!1),m=Object(i.a)(c,2),b=m[0],p=m[1],E=Object(r.useState)(!1),j=Object(i.a)(E,2),k=j[0],S=j[1],I=Object(r.useState)("dark"),J=Object(i.a)(I,2),z=J[0],B=J[1],P=Object(r.useRef)(null),L=function(){var n=Object(r.useState)({pos:{x:0,y:0},tetromino:v[0].shape,collided:!1}),e=Object(i.a)(n,2),t=e[0],o=e[1],a=function(n,e){var t=n.map(function(e,t){return n.map(function(n){return n[t]})});return e>0?t.map(function(n){return n.reverse()}):t.reverse()},c=Object(r.useCallback)(function(){o({pos:{x:4,y:0},tetromino:O().shape,collided:!1})},[]);return[t,function(n){var e=n.x,t=n.y,r=n.collided;o(function(n){return Object(g.a)(Object(g.a)({},n),{},{pos:{x:n.pos.x+=e,y:n.pos.y+=t},collided:r})})},c,function(n,e){var r=JSON.parse(JSON.stringify(t));r.tetromino=a(r.tetromino,e);for(var c=r.pos.x,i=1;d(r,n,{x:0,y:0});)if(r.pos.x+=i,(i=-(i+(i>0?1:-1)))>r.tetromino[0].length)return a(r.tetromino,-e),void(r.pos.x=c);o(r)}]}(),T=Object(i.a)(L,4),R=T[0],Z=T[1],H=T[2],U=T[3],F=y(R,H),G=Object(i.a)(F,3),K=G[0],W=G[1],X=function(n){var e=Object(r.useState)(0),t=Object(i.a)(e,2),o=t[0],a=t[1],c=Object(r.useState)(0),l=Object(i.a)(c,2),u=l[0],f=l[1],s=Object(r.useState)(0),d=Object(i.a)(s,2),m=d[0],b=d[1],p=[40,100,300,1200],h=Object(r.useCallback)(function(){n>0&&(a(function(e){return e+p[n-1]*(m+1)}),f(function(e){return e+n}))},[m,p,n]);return Object(r.useEffect)(function(){h()},[h,n,o]),[o,a,u,f,m,b]}(G[2]),$=Object(i.a)(X,6),q=$[0],Q=$[1],V=$[2],Y=$[3],_=$[4],nn=$[5],en=function(){Object(r.useEffect)(function(){},[]);var n="undefined"===typeof navigator?"SSR":navigator.userAgent;return w(n)}(),tn=function(n){d(R,K,{x:n,y:0})||Z({x:n,y:0})},rn=function(){P.current.focus(),W(s()),a(500),H(),p(!1),Q(0),Y(0),nn(0),S(!0)},on=function(){V>10*(_+1)&&(nn(function(n){return n+1}),a(1e3/(_+1)+200)),d(R,K,{x:0,y:1})?(R.pos.y<1&&(p(!0),a(null)),Z({x:0,y:0,collided:!0})):Z({x:0,y:1,collided:!1})},an=function(){a(null),on()};return function(n,e){var t=Object(r.useRef)();Object(r.useEffect)(function(){t.current=n},[n]),Object(r.useEffect)(function(){if(null!==e){var n=setInterval(function(){t.current()},e);return function(){clearInterval(n)}}},[e])}(function(){on()},t),o.a.createElement(l.a,{theme:"light"===z?u:f},o.a.createElement(h,{role:"button",tabIndex:"0",onKeyDown:function(n){return function(n){var e=n.keyCode;b||(37===e?tn(-1):39===e?tn(1):40===e?an():38===e&&U(K,1))}(n)},onKeyUp:function(n){var e=n.keyCode;b||40===e&&a(500/(_+1)+200)},ref:P},o.a.createElement(x,null,k&&!b&&o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,!b&&o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{text:"Score: ".concat(q)}),o.a.createElement(M,{text:"Rows: ".concat(V)}),o.a.createElement(M,{text:"Level: ".concat(_)}))),o.a.createElement(A,{stage:K}),en.isMobile()&&o.a.createElement("footer",null,o.a.createElement(D,{left:!0,callback:function(){return tn(-1)}}),o.a.createElement(D,{down:!0,callback:function(){return an()},onMouseUp:function(){b||a(500/(_+1)+200)}}),o.a.createElement(D,{callback:function(){return U(K,1)}}),o.a.createElement(D,{right:!0,callback:function(){return tn(1)}}))),(!k||b)&&o.a.createElement(N,{onChange:function(){B("light"===z?"dark":"light")},text:"light"===z?"light":"dark"}),!k&&!b&&o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"React",o.a.createElement("br",null),"Tetris"),o.a.createElement(C,{callback:rn,text:"Start Game"})),b&&o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"Game",o.a.createElement("br",null),"Over"),o.a.createElement(C,{callback:rn,text:"Play Again"})))))},F=function(){return o.a.createElement(U,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[15,1,2]]]);
//# sourceMappingURL=main.b3a63bcd.chunk.js.map