(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(n,e,t){n.exports=t(26)},20:function(n,e,t){},26:function(n,e,t){"use strict";t.r(e);var r=t(0),o=t.n(r),a=t(10),i=t.n(a),c=(t(20),t(2)),l=t(1),u={bg:"#eee",text:"#111"},f={bg:"#222",text:"#fff"},s=function(){return Array.from(Array(20),function(){return new Array(12).fill([0,"clear"])})},d=function(n,e,t){for(var r=t.x,o=t.y,a=0;a<n.tetromino.length;a+=1)for(var i=0;i<n.tetromino[a].length;i+=1)if(0!==n.tetromino[a][i]&&(!e[a+n.pos.y+o]||!e[a+n.pos.y+o][i+n.pos.x+r]||"clear"!==e[a+n.pos.y+o][i+n.pos.x+r][1]))return!0},b=t(3);function p(){var n=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  padding: 0 2rem;\n  background-color: ",";\n\n  header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 1rem;\n  }\n\n  footer {\n    margin-top: 1rem;\n    flex-direction: row;\n    justify-content: center;\n    width: 100%;\n    display: flex;\n  }\n"]);return p=function(){return n},n}function m(){var n=Object(b.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-size: cover;\n  overflow: hidden;\n  outline: none;\n  display: flex;\n  flex-direction: column;\n\n  .wrapper {\n    width: 20rem;\n    text-align: center;\n\n    h1 {\n      font-family: Pixel, Arial, Helvetica, sans-serif;\n      font-size: 4.6rem;\n      color: ",";\n    }\n  }\n"]);return m=function(){return n},n}var h=l.b.div(m(),function(n){return n.theme.text}),g=l.b.div(p(),function(n){return n.theme.bg});var v=t(8),x={0:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 173, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 217, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,0,0],["T","T","T"],[0,"T",0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},w=function(){var n="IJLOSTZ"[Math.floor(Math.random()*"IJLOSTZ".length)];return x[n]},y=function(n,e){var t=Object(r.useState)(s()),o=Object(c.a)(t,2),a=o[0],i=o[1],l=Object(r.useState)(0),u=Object(c.a)(l,2),f=u[0],d=u[1];return Object(r.useEffect)(function(){d(0);var t=function(t){var r=t.map(function(n){return n.map(function(n){return"clear"===n[1]?[0,"clear"]:n})});return n.tetromino.forEach(function(e,t){e.forEach(function(e,o){0!==e&&(r[t+n.pos.y][o+n.pos.x]=[e,"".concat(n.collided?"merged":"clear")])})}),n.collided?(e(),function(n){return n.reduce(function(e,t){return-1===t.findIndex(function(n){return 0===n[0]})?(d(function(n){return n+1}),e.unshift(new Array(n[0].length).fill([0,"clear"])),e):(e.push(t),e)},[])}(r)):r};i(function(n){return t(n)})},[n,e]),[a,i,f]},O=function(n){var e=function(){return Boolean(n.match(/Android/i))},t=function(){return Boolean(n.match(/iPhone|iPad|iPod/i))},r=function(){return Boolean(n.match(/SSR/i))},o=function(){return Boolean(e()||t()||Boolean(n.match(/Opera Mini/i))||Boolean(n.match(/IEMobile/i)))};return{isMobile:o,isDesktop:function(){return Boolean(!o()&&!r())},isAndroid:e,isIos:t,isSSR:r}};function E(){var n=Object(b.a)(["\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(45vh / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  box-shadow: 0px 0px 41px 8px rgba(0, 0, 0, 0.4);\n  width: 100%;\n  max-width: 45vh;\n  background: #111;\n"]);return E=function(){return n},n}var j=l.b.div(E(),function(n){return n.height},function(n){return n.width},function(n){return n.width});function k(){var n=Object(b.a)(["\n  width: auto;\n  background: rgba(",", 0.8);\n  border: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return k=function(){return n},n}var S=l.b.div(k(),function(n){return n.color},function(n){return 0===n.type?"0px solid":"4px solid"},function(n){return n.color},function(n){return n.color},function(n){return n.color},function(n){return n.color}),A=o.a.memo(function(n){var e=n.type;return o.a.createElement(S,{type:e,color:x[e].color})}),I=function(n){var e=n.stage,t=n.mobileCapture;return o.a.createElement(j,{width:e[0].length,height:e.length,onMouseDown:t},e.map(function(n){return n.map(function(n,e){return o.a.createElement(A,{key:e,type:n[0]})})}))};function C(){var n=Object(b.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0 0.2rem;\n  padding: 0.7rem;\n  border: 2px solid #777;\n  border-radius: 0.5rem;\n  color: ",";\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 0.8rem;\n"]);return C=function(){return n},n}var M=l.b.div(C(),function(n){return n.gameOver?"#ff6d00":"#999"}),J=function(n){var e=n.gameOver,t=n.text;return o.a.createElement(M,{gameOver:e},t)};function P(){var n=Object(b.a)(["\n  box-sizing: border-box;\n  padding: 20px 0;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 10px;\n  border: none;\n  color: white;\n  background: #ff6d00;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 1rem;\n  outline: none;\n  cursor: pointer;\n"]);return P=function(){return n},n}var L=l.b.button(P()),R=function(n){var e=n.callback,t=n.text;return o.a.createElement(L,{onClick:e},t)};function T(){var n=Object(b.a)(['\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: absolute;\n  top: 1rem;\n\n  .theme-switch {\n    display: inline-block;\n    height: 24px;\n    position: relative;\n    width: 45px;\n\n    input {\n      display: none;\n    }\n\n    .slider {\n      background-color: #666;\n      bottom: 0;\n      cursor: pointer;\n      left: 0;\n      position: absolute;\n      right: 0;\n      top: 0;\n      outline: none;\n      -webkit-tap-highlight-color: transparent;\n      transition: 0.4s;\n\n      &:before {\n        background-color: #fff;\n        bottom: 4px;\n        content: "";\n        height: 16px;\n        left: 4px;\n        position: absolute;\n        transition: 0.4s;\n        width: 16px;\n      }\n\n      &.round {\n        border-radius: 34px;\n\n        &:before {\n          border-radius: 50%;\n        }\n      }\n    }\n\n    input:checked + .slider {\n      background-color: #ff6d00;\n    }\n\n    input:checked + .slider:before {\n      transform: translateX(20px);\n    }\n  }\n  .text {\n    color: ',";\n    margin-top: 0.5rem;\n    font-family: Pixel, Arial, Helvetica, sans-serif;\n    font-size: 0.8rem;\n  }\n"]);return T=function(){return n},n}var z=l.b.label(T(),function(n){return n.theme.text}),B=function(n){var e=n.onChange,t=n.text;return o.a.createElement(z,{htmlFor:"checkbox"},o.a.createElement("label",{className:"theme-switch"},o.a.createElement("input",{type:"checkbox",id:"checkbox",onChange:e}),o.a.createElement("div",{className:"slider round"})),o.a.createElement("span",{className:"text"},t))},N=t(4);function U(){var n=Object(b.a)(["\n  margin: 0.2rem;\n  border-radius: 0.5rem;\n  border: none;\n  height: 3rem;\n  width: 3rem;\n  color: white;\n  background: #ff6d00;\n  font-family: Pixel, Arial, Helvetica, sans-serif;\n  font-size: 2.5rem;\n  outline: none;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  -webkit-tap-highlight-color: transparent;\n\n  &:active {\n    -webkit-box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n    -moz-box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n    box-shadow: inset 0px 5px 0px 0px rgba(0, 0, 0, 0.4);\n  }\n"]);return U=function(){return n},n}var W=l.b.button(U()),Z=function(n){var e=n.callback,t=n.onMouseUp,r=n.left,a=n.right,i=n.down;return o.a.createElement(W,{onMouseDown:function(n){n.preventDefault(),e(n)},onMouseUp:t},r?o.a.createElement(N.b,null):a?o.a.createElement(N.c,null):i?o.a.createElement(N.a,null):void 0)},D=function(){var n=Object(r.useState)(null),e=Object(c.a)(n,2),t=e[0],a=e[1],i=Object(r.useState)(!1),b=Object(c.a)(i,2),p=b[0],m=b[1],E=Object(r.useState)(!1),j=Object(c.a)(E,2),k=j[0],S=j[1],A=Object(r.useState)("dark"),C=Object(c.a)(A,2),M=C[0],P=C[1],L=Object(r.useRef)(null),T=function(){var n=Object(r.useState)({pos:{x:0,y:0},tetromino:x[0].shape,collided:!1}),e=Object(c.a)(n,2),t=e[0],o=e[1],a=function(n,e){var t=n.map(function(e,t){return n.map(function(n){return n[t]})});return e>0?t.map(function(n){return n.reverse()}):t.reverse()},i=Object(r.useCallback)(function(){o({pos:{x:4,y:0},tetromino:w().shape,collided:!1})},[]);return[t,function(n){var e=n.x,t=n.y,r=n.collided;o(function(n){return Object(v.a)(Object(v.a)({},n),{},{pos:{x:n.pos.x+=e,y:n.pos.y+=t},collided:r})})},i,function(n,e){var r=JSON.parse(JSON.stringify(t));r.tetromino=a(r.tetromino,e);for(var i=r.pos.x,c=1;d(r,n,{x:0,y:0});)if(r.pos.x+=c,(c=-(c+(c>0?1:-1)))>r.tetromino[0].length)return a(r.tetromino,-e),void(r.pos.x=i);o(r)}]}(),z=Object(c.a)(T,4),N=z[0],U=z[1],W=z[2],D=z[3],H=y(N,W),F=Object(c.a)(H,3),G=F[0],K=F[1],X=function(n){var e=Object(r.useState)(0),t=Object(c.a)(e,2),o=t[0],a=t[1],i=Object(r.useState)(0),l=Object(c.a)(i,2),u=l[0],f=l[1],s=Object(r.useState)(0),d=Object(c.a)(s,2),b=d[0],p=d[1],m=[40,100,300,1200],h=Object(r.useCallback)(function(){n>0&&(a(function(e){return e+m[n-1]*(b+1)}),f(function(e){return e+n}))},[b,m,n]);return Object(r.useEffect)(function(){h()},[h,n,o]),[o,a,u,f,b,p]}(F[2]),$=Object(c.a)(X,6),q=$[0],Q=$[1],V=$[2],Y=$[3],_=$[4],nn=$[5],en=function(){Object(r.useEffect)(function(){},[]);var n="undefined"===typeof navigator?"SSR":navigator.userAgent;return O(n)}(),tn=function(n){d(N,G,{x:n,y:0})||U({x:n,y:0})},rn=function(){L.current.focus(),K(s()),a(500),W(),m(!1),Q(0),Y(0),nn(0),S(!0)},on=function(){V>10*(_+1)&&(nn(function(n){return n+1}),a(1e3/(_+1)+200)),d(N,G,{x:0,y:1})?(N.pos.y<1&&(m(!0),a(null)),U({x:0,y:0,collided:!0})):U({x:0,y:1,collided:!1})},an=function(){a(null),on()};return function(n,e){var t=Object(r.useRef)();Object(r.useEffect)(function(){t.current=n},[n]),Object(r.useEffect)(function(){if(null!==e){var n=setInterval(function(){t.current()},e);return function(){clearInterval(n)}}},[e])}(function(){on()},t),o.a.createElement(l.a,{theme:"light"===M?u:f},o.a.createElement(h,{role:"button",tabIndex:"0",onKeyDown:function(n){return function(n){var e=n.keyCode;p||(37===e?tn(-1):39===e?tn(1):40===e?an():38===e&&D(G,1))}(n)},onKeyUp:function(n){var e=n.keyCode;p||40===e&&a(500/(_+1)+200)},ref:L},o.a.createElement(g,null,k&&!p&&o.a.createElement(o.a.Fragment,null,o.a.createElement("header",null,!p&&o.a.createElement(o.a.Fragment,null,o.a.createElement(J,{text:"Score: ".concat(q)}),o.a.createElement(J,{text:"Rows: ".concat(V)}),o.a.createElement(J,{text:"Level: ".concat(_)}))),o.a.createElement(I,{mobileCapture:function(){en.isMobile()&&D(G,1)},stage:G}),en.isMobile()&&o.a.createElement("footer",null,o.a.createElement(Z,{left:!0,callback:function(){return tn(-1)}}),o.a.createElement(Z,{down:!0,callback:function(){return an()},onMouseUp:function(){p||a(500/(_+1)+200)}}),o.a.createElement(Z,{right:!0,callback:function(){return tn(1)}}))),(!k||p)&&o.a.createElement(B,{onChange:function(){P("light"===M?"dark":"light")},text:"light"===M?"light":"dark"}),!k&&!p&&o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"React",o.a.createElement("br",null),"Tetris"),o.a.createElement(R,{callback:rn,text:"Start Game"})),p&&o.a.createElement("div",{className:"wrapper"},o.a.createElement("h1",null,"Game",o.a.createElement("br",null),"Over"),o.a.createElement(R,{callback:rn,text:"Play Again"})))))},H=function(){return o.a.createElement(D,null)},F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(n,e){navigator.serviceWorker.register(n).then(function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(function(n){console.error("Error during service worker registration:",n)})}i.a.render(o.a.createElement(H,null),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/tetris-react",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/tetris-react","/service-worker.js");F?(function(n,e){fetch(n).then(function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(n){n.unregister().then(function(){window.location.reload()})}):G(n,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,n),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):G(e,n)})}}()}},[[15,1,2]]]);
//# sourceMappingURL=main.0b44c4c1.chunk.js.map